#The only difference between docker-compose.yaml and this debug file is moving
#from Dockerfile "ENTRYPOINT"  into "command" of the compose file
#don't forget in compose run config set=true "--build/force build images"

version: "3.6"
services:

  configuration-service:
    ports:
      - "88:88"
    build:
      context: ./configurationService
      dockerfile: docker/Dockerfile_debug
    network_mode: host
    environment:
      - SPRING_CLOUD_CONFIG_GIT_URL=${SPRING_CLOUD_CONFIG_GIT_URL}
      - SPRING_CLOUD_CONFIG_GIT_USERNAME=${SPRING_CLOUD_CONFIG_GIT_USERNAME}
      - SPRING_CLOUD_CONFIG_GIT_PASSWORD=${SPRING_CLOUD_CONFIG_GIT_PASSWORD}
      - SPRING_CLOUD_CONFIG_ENCRYPTION_KEY=${SPRING_CLOUD_CONFIG_ENCRYPTION_KEY}
    command: java -jar /configuration-service/configuration-service.jar